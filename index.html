<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fondos para graduación</title>
  <link rel="icon" type="image/png" href="https://res.cloudinary.com/dczh5rxbe/image/upload/v1760455011/VERSION_CORTA_PNG_-_YOREL_CANDO_Mesa_de_trabajo_1_kqjgtw.png">
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Raleway', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    .modal-backdrop {
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    .gallery-image {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .gallery-image:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }
    
    .vote-button {
      transition: all 0.3s ease;
    }
    
    .vote-button:hover {
      transform: scale(1.05);
    }
    
    .toast {
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .reference-image {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body style="background-color: #FFFFFF;"><!-- Toast Notification -->
  <div id="toast" class="fixed top-4 right-4 text-white px-6 py-3 rounded-lg shadow-lg hidden z-50 toast" style="background-color: #008479;">
   <p id="toast-message"></p>
  </div><!-- Fixed Logo Header -->
  <div class="fixed top-0 left-0 right-0 z-30 flex justify-center py-2" style="background-color: #FFFFFF; box-shadow: 0 2px 4px rgba(168, 169, 172, 0.1);"><img src="https://res.cloudinary.com/dczh5rxbe/image/upload/v1760143546/VERSION_HORIZONTAL_NEGRO_PNG_Mesa_de_trabajo_1_f1qyof.png" alt="Logo Yorel Cando Fotógrafo" class="h-9 object-contain" onerror="this.style.display='none';">
  </div><!-- Header -->
  <header style="background-color: #FFFFFF; box-shadow: 0 1px 3px 0 rgba(168, 169, 172, 0.1); margin-top: 48px;">
   <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
    <h1 id="page-title" class="text-4xl font-bold text-center mb-2" style="color: #008479;">Elige el fondo para la sesión de graduación 2025</h1>
    <p id="page-subtitle" class="text-lg text-center" style="color: #A8A9AC;">Vota por tu fondo favorito</p>
   </div>
  </header><!-- Reference Images Section -->
  <section class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
   <div class="p-4 mb-6" style="background-color: #FFFFFF; border-left: 4px solid #008479;">
    <div class="flex">
     <div class="flex-shrink-0">
      <svg class="h-5 w-5" style="color: #008479;" viewbox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
      </svg>
     </div>
     <div class="ml-3">
      <p class="text-sm font-semibold mb-2" style="color: #008479;">Observación importante: Los fondos de las fotos de referencia ya no están disponibles</p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-3"><img src="https://res.cloudinary.com/dczh5rxbe/image/upload/v1762315470/745d94f05503f37d512c63a70fb9716c_wf6awn.jpg" alt="Referencia 1" class="reference-image shadow-md" onerror="this.src=''; this.alt='Imagen de referencia no disponible'; this.style.display='none';"> <img src="https://res.cloudinary.com/dczh5rxbe/image/upload/v1762315534/f4d1a9c6504c25b02962bee425295c36_hxve3w.jpg" alt="Referencia 2" class="reference-image shadow-md" onerror="this.src=''; this.alt='Imagen de referencia no disponible'; this.style.display='none';">
      </div>
     </div>
    </div>
   </div>
  </section><!-- Voting Rules Section -->
  <section class="max-w-7xl mx-auto px-4 py-2 sm:px-6 lg:px-8">
   <div class="p-4 mb-6" style="background-color: #FFFFFF; border-left: 4px solid #008479;">
    <div class="flex">
     <div class="flex-shrink-0">
      <svg class="h-5 w-5" style="color: #008479;" viewbox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
      </svg>
     </div>
     <div class="ml-3">
      <p class="text-sm font-semibold mb-1" style="color: #008479;">Reglas de votación:</p>
      <ul class="text-sm list-disc list-inside space-y-1" style="color: #A8A9AC;">
       <li>Solo puedes votar <strong>una vez</strong> por persona</li>
       <li>Para cambiar tu voto, primero debes <strong>eliminar</strong> el anterior desde la tabla de resultados</li>
       <li>Solo tú puedes eliminar tu propio voto verificando tu nombre</li>
      </ul>
     </div>
    </div>
   </div>
  </section><!-- Gallery -->
  <main class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
   <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"><!-- Gallery items will be inserted here -->
   </div>
  </main><!-- Results Section -->
  <section class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
   <div class="rounded-lg p-6" style="background-color: #FFFFFF; box-shadow: 0 4px 6px -1px rgba(168, 169, 172, 0.1);">
    <h2 id="results-title" class="text-3xl font-bold mb-6 text-center" style="color: #008479;">Votaciones en tiempo real</h2><!-- Vote Counts -->
    <div id="vote-counts" class="mb-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"><!-- Vote counts will be inserted here -->
    </div><!-- Votes Table -->
    <div class="overflow-x-auto">
     <table class="min-w-full" style="border-top: 1px solid #A8A9AC;">
      <thead style="background-color: #FFFFFF;">
       <tr>
        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #008479;">Votante</th>
        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #008479;">Fondo Elegido</th>
        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #008479;">Fecha y Hora</th>
        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider" style="color: #008479;">Acciones</th>
       </tr>
      </thead>
      <tbody id="votes-table" style="background-color: #FFFFFF; border-top: 1px solid #A8A9AC;"><!-- Votes will be inserted here -->
      </tbody>
     </table>
    </div>
   </div>
  </section><!-- Footer -->
  <footer class="mt-12" style="background-color: #008479;">
   <div class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8 text-center"><img id="footer-logo" src="https://res.cloudinary.com/dczh5rxbe/image/upload/v1762317966/VERSION_EN_BLANCO_PNG_-_YOREL_CANDO_Mesa_de_trabajo_1_rkqcev.png" alt="Yorel Cando Fotógrafo" class="h-8 mx-auto mb-2 object-contain" onerror="this.style.display='none';" style="filter: brightness(1);">
    <p id="footer-text" class="text-lg mb-2 hidden" style="color: #FFFFFF;">Fotografía profesional por Yorel Cando</p><a id="footer-website" href="https://www.yorelcandofotografo.com" target="_blank" rel="noopener noreferrer" class="transition-colors" style="color: #FFFFFF;">www.yorelcandofotografo.com</a>
   </div>
  </footer><!-- Modal -->
  <div id="modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-backdrop absolute inset-0" style="background-color: rgba(0, 0, 0, 0.8);"></div>
   <div class="flex items-center justify-center min-h-full p-4 fixed inset-0">
    <div class="rounded-lg shadow-xl max-w-md w-full p-6 relative z-50" style="background-color: #FFFFFF; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
     <h3 class="text-2xl font-bold mb-4 text-center" style="color: #008479;">Registra tu voto</h3>
     <p class="mb-4 text-center" style="color: #A8A9AC;">Has elegido: <span id="selected-background-name" class="font-semibold" style="color: #008479;"></span></p>
     <form id="vote-form" class="space-y-4">
      <div><label for="voter-name" class="block text-sm font-medium mb-1" style="color: #008479;">Nombre completo *</label> <input type="text" id="voter-name" required class="w-full px-4 py-2 rounded-lg focus:ring-2 focus:border-transparent" style="border: 1px solid #A8A9AC; focus:ring-color: #008479;" placeholder="Tu nombre completo">
      </div>
      <div><label for="contact-info" class="block text-sm font-medium mb-1" style="color: #008479;">Teléfono o correo (opcional)</label> <input type="text" id="contact-info" class="w-full px-4 py-2 rounded-lg focus:ring-2 focus:border-transparent" style="border: 1px solid #A8A9AC; focus:ring-color: #008479;" placeholder="Teléfono o email">
      </div>
      <div class="flex gap-3 pt-4"><button type="button" onclick="closeModal()" class="flex-1 px-4 py-2 rounded-lg transition-colors" style="border: 1px solid #A8A9AC; color: #A8A9AC; background-color: #FFFFFF;"> Cancelar </button> <button type="submit" id="submit-vote-btn" class="flex-1 px-4 py-2 rounded-lg transition-colors" style="background-color: #008479; color: #FFFFFF;"> Enviar voto </button>
      </div>
     </form>
    </div>
   </div>
  </div>
  <script>
    const backgrounds = [
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314711/SKU3000-Foto-1_aqxyyi.jpg', name: 'SKU3000' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314711/SKU2994-Foto-1_v28kym.jpg', name: 'SKU2994' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314711/SKU2992-Foto-1_yzruee.jpg', name: 'SKU2992' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314710/SKU2995-Foto-1_bmwvpp.jpg', name: 'SKU2995' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314710/SKU3007-Foto-1_oeoaqk.jpg', name: 'SKU3007' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314710/SKU2575-Foto-1_p3tc5m.jpg', name: 'SKU2575' },
      { url: 'https://res.cloudinary.com/dczh5rxbe/image/upload/v1762314710/SKU3005-Foto-1_ltdmt4.jpg', name: 'SKU3005' }
    ];

    const defaultConfig = {
      page_title: 'Elige el fondo para la sesión de graduación 2025',
      page_subtitle: 'Vota por tu fondo favorito',
      results_title: 'Votaciones en tiempo real',
      footer_text: 'Fotografía profesional por Yorel Cando',
      footer_website: 'www.yorelcandofotografo.com',
      primary_color: '#008479',
      background_color: '#FFFFFF',
      text_color: '#111827',
      card_color: '#FFFFFF',
      accent_color: '#A8A9AC',
      font_family: 'Raleway'
    };

    let currentVotes = [];
    let selectedBackground = null;

    function renderGallery() {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = backgrounds.map(bg => `
        <div class="rounded-lg overflow-hidden gallery-image" style="background-color: #FFFFFF; box-shadow: 0 4px 6px -1px rgba(168, 169, 172, 0.1);">
          <img src="${bg.url}" alt="${bg.name}" class="w-full h-80 object-contain" style="background-color: #FFFFFF;" onerror="this.src=''; this.alt='Imagen no disponible'; this.style.display='none';">
          <div class="p-4">
            <h3 class="text-lg font-semibold mb-3" style="color: #008479;">${bg.name}</h3>
            <button onclick="openVoteModal('${bg.name}')" class="w-full px-4 py-2 rounded-lg vote-button transition-colors" style="background-color: #008479; color: #FFFFFF;">
              Votar por este fondo
            </button>
          </div>
        </div>
      `).join('');
    }

    function openVoteModal(backgroundName) {
      selectedBackground = backgroundName;
      document.getElementById('selected-background-name').textContent = backgroundName;
      document.getElementById('modal').classList.remove('hidden');
      document.getElementById('voter-name').value = '';
      document.getElementById('contact-info').value = '';
      
      // Bloquear scroll de la página
      document.body.style.overflow = 'hidden';
      
      // Enfocar el primer campo
      setTimeout(() => {
        document.getElementById('voter-name').focus();
      }, 100);
    }

    function closeModal() {
      document.getElementById('modal').classList.add('hidden');
      selectedBackground = null;
      
      // Restaurar scroll de la página
      document.body.style.overflow = 'auto';
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toast-message');
      toastMessage.textContent = message;
      toast.classList.remove('hidden');
      setTimeout(() => {
        toast.classList.add('hidden');
      }, 3000);
    }

    function getExistingVote(voterName) {
      return currentVotes.find(vote => 
        vote.voter_name.toLowerCase().trim() === voterName.toLowerCase().trim()
      );
    }

    async function deleteVote(voteId, voterName) {
      // Crear modal personalizado en lugar de usar prompt()
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 z-50 flex items-center justify-center';
      modal.innerHTML = `
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-50 mx-4">
          <h3 class="text-xl font-bold text-gray-900 mb-4">Confirmar eliminación de voto</h3>
          <p class="text-gray-600 mb-4">Para eliminar el voto de <strong>${voterName}</strong>, confirma tu nombre completo:</p>
          <input type="text" id="verification-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4" placeholder="Escribe tu nombre completo">
          <div class="flex gap-3">
            <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
              Cancelar
            </button>
            <button onclick="confirmDelete('${voteId}', '${voterName}', this)" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
              Eliminar voto
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      document.getElementById('verification-name').focus();
    }

    async function confirmDelete(voteId, voterName, button) {
      const verificationName = document.getElementById('verification-name').value.trim();
      
      if (!verificationName) {
        showToast('Por favor, escribe tu nombre para confirmar.');
        return;
      }
      
      if (verificationName.toLowerCase() !== voterName.toLowerCase()) {
        showToast('El nombre no coincide. Solo puedes eliminar tu propio voto.');
        return;
      }

      button.disabled = true;
      button.textContent = 'Eliminando...';

      const voteToDelete = currentVotes.find(vote => vote.__backendId === voteId);
      if (!voteToDelete) {
        showToast('Error: No se pudo encontrar el voto a eliminar.');
        button.closest('.fixed').remove();
        return;
      }

      const result = await window.dataSdk.delete(voteToDelete);
      
      if (result.isOk) {
        showToast(`Tu voto ha sido eliminado correctamente. Ahora puedes votar nuevamente.`);
      } else {
        showToast('Error al eliminar el voto. Por favor, intenta nuevamente.');
      }
      
      button.closest('.fixed').remove();
    }

    function renderVotes(votes) {
      currentVotes = votes;
      
      const voteCounts = {};
      backgrounds.forEach(bg => {
        voteCounts[bg.name] = 0;
      });
      
      votes.forEach(vote => {
        if (voteCounts[vote.selected_background] !== undefined) {
          voteCounts[vote.selected_background]++;
        }
      });
      
      const voteCountsContainer = document.getElementById('vote-counts');
      // Solo mostrar fondos que tienen votos
      const backgroundsWithVotes = backgrounds.filter(bg => voteCounts[bg.name] > 0);
      
      if (backgroundsWithVotes.length === 0) {
        voteCountsContainer.innerHTML = `
          <div class="col-span-full text-center py-8">
            <p class="text-lg" style="color: #A8A9AC;">Aún no hay votos registrados</p>
          </div>
        `;
      } else {
        voteCountsContainer.innerHTML = backgroundsWithVotes.map(bg => `
          <div class="rounded-lg p-4 text-center" style="background-color: #FFFFFF; border: 1px solid #A8A9AC;">
            <p class="text-sm mb-1" style="color: #A8A9AC;">${bg.name}</p>
            <p class="text-3xl font-bold" style="color: #008479;">${voteCounts[bg.name]}</p>
            <p class="text-xs" style="color: #A8A9AC;">votos</p>
          </div>
        `).join('');
      }
      
      const votesTable = document.getElementById('votes-table');
      if (votes.length === 0) {
        votesTable.innerHTML = `
          <tr>
            <td colspan="4" class="px-6 py-4 text-center" style="color: #A8A9AC;">
              Aún no hay votos registrados
            </td>
          </tr>
        `;
      } else {
        votesTable.innerHTML = votes.slice().reverse().map(vote => {
          const date = new Date(vote.vote_timestamp);
          const formattedDate = date.toLocaleDateString('es-ES', { 
            day: '2-digit', 
            month: '2-digit', 
            year: 'numeric' 
          });
          const formattedTime = date.toLocaleTimeString('es-ES', { 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${vote.voter_name}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${vote.selected_background}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formattedDate} ${formattedTime}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <button onclick="deleteVote('${vote.__backendId}', '${vote.voter_name}')" class="text-red-600 hover:text-red-800 text-xs px-2 py-1 border border-red-300 rounded hover:bg-red-50 transition-colors">
                  Eliminar
                </button>
              </td>
            </tr>
          `;
        }).join('');
      }
    }

    const dataHandler = {
      onDataChanged(data) {
        renderVotes(data);
      }
    };

    document.getElementById('vote-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const voterName = document.getElementById('voter-name').value.trim();
      const contactInfo = document.getElementById('contact-info').value.trim();
      
      // Verificar si ya existe un voto para este nombre
      const existingVote = getExistingVote(voterName);
      if (existingVote) {
        showToast('Ya has votado anteriormente. Para cambiar tu voto, primero elimina el anterior desde la tabla de resultados.');
        return;
      }
      
      const submitBtn = document.getElementById('submit-vote-btn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando...';
      
      const voteData = {
        voter_name: voterName,
        contact_info: contactInfo,
        selected_background: selectedBackground,
        vote_timestamp: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(voteData);
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Enviar voto';
      
      if (result.isOk) {
        closeModal();
        showToast('¡Gracias! Tu voto ha sido registrado correctamente.');
      } else {
        showToast('Error al registrar el voto. Por favor, intenta nuevamente.');
      }
    });

    async function onConfigChange(config) {
      document.getElementById('page-title').textContent = config.page_title || defaultConfig.page_title;
      document.getElementById('page-subtitle').textContent = config.page_subtitle || defaultConfig.page_subtitle;
      document.getElementById('results-title').textContent = config.results_title || defaultConfig.results_title;
      
      // El logo reemplaza al texto del footer
      const footerLogo = document.getElementById('footer-logo');
      if (footerLogo) {
        footerLogo.style.display = 'block';
      }
      
      const websiteLink = document.getElementById('footer-website');
      const websiteText = config.footer_website || defaultConfig.footer_website;
      websiteLink.textContent = websiteText;
      websiteLink.href = websiteText.startsWith('http') ? websiteText : `https://${websiteText}`;
      
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const cardColor = config.card_color || defaultConfig.card_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      
      // Aplicar colores y fuente
      document.body.style.backgroundColor = backgroundColor;
      document.body.style.fontFamily = `'${fontFamily}', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;
      
      // Botones principales
      const buttons = document.querySelectorAll('.vote-button, button[type="submit"]');
      buttons.forEach(btn => {
        btn.style.backgroundColor = primaryColor;
        btn.style.borderColor = primaryColor;
      });
      
      // Botones de eliminar
      const deleteButtons = document.querySelectorAll('button[onclick*="deleteVote"]');
      deleteButtons.forEach(btn => {
        btn.style.color = primaryColor;
        btn.style.borderColor = accentColor;
      });
      
      // Títulos y encabezados
      const headings = document.querySelectorAll('h1, h2, h3');
      headings.forEach(h => {
        h.style.color = textColor;
        h.style.fontFamily = `'${fontFamily}', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;
      });
      
      // Tarjetas y contenedores
      const cards = document.querySelectorAll('.bg-white');
      cards.forEach(card => {
        card.style.backgroundColor = cardColor;
      });
      
      // Contadores de votos
      const voteCountNumbers = document.querySelectorAll('#vote-counts .text-3xl');
      voteCountNumbers.forEach(num => {
        num.style.color = primaryColor;
      });
    }

    async function init() {
      renderGallery();
      
      if (window.dataSdk) {
        const initResult = await window.dataSdk.init(dataHandler);
        if (!initResult.isOk) {
          console.error('Error al inicializar Data SDK');
        }
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (value) => {
                  config.primary_color = value;
                  window.elementSdk.setConfig({ primary_color: value });
                }
              },
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  config.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  config.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => config.card_color || defaultConfig.card_color,
                set: (value) => {
                  config.card_color = value;
                  window.elementSdk.setConfig({ card_color: value });
                }
              },
              {
                get: () => config.accent_color || defaultConfig.accent_color,
                set: (value) => {
                  config.accent_color = value;
                  window.elementSdk.setConfig({ accent_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => config.font_family || defaultConfig.font_family,
              set: (value) => {
                config.font_family = value;
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['page_title', config.page_title || defaultConfig.page_title],
            ['page_subtitle', config.page_subtitle || defaultConfig.page_subtitle],
            ['results_title', config.results_title || defaultConfig.results_title],
            ['footer_text', config.footer_text || defaultConfig.footer_text],
            ['footer_website', config.footer_website || defaultConfig.footer_website]
          ])
        });
      }
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9999bab9130783fe',t:'MTc2MjMxODIxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>